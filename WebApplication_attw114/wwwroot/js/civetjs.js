var CivetJsSDK_iPhone_Run,iOsMsgIframes,cv__bridge,CUSTOM_PROTOCOL_SCHEME,useIframeCount,console;(function(){function o(n){for(var t,i=0;i<5;i++)t=n.createElement("iframe"),t.style.display="none",n.documentElement.appendChild(t),iOsMsgIframes[i]=t}function e(){document.readyState=="complete"&&window.civet_init_phone_for_iPad_byEquipment()}function f(){for(var r=document.getElementsByTagName("A"),u=r.length,t,n=0;n<u;n++)t=r[i].href.toLowerCase().replace("^s+","").replace("s+$",""),t.indexOf("tel:")==0&&(r[n].href="javascript:window.civetmobile.callPhoneNum('"+t.substr(6)+"')")}var n,u,r,t;if(window.civet_jssdk_load!==!0){if(window.civet_jssdk_load=!0,CivetJsSDK_iPhone_Run=0,iOsMsgIframes=[null,null,null,null,null],cv__bridge="civetmobile",CUSTOM_PROTOCOL_SCHEME="jscall",useIframeCount=0,n=navigator.userAgent,window.setIosJsThreadNum=function(){},n.indexOf("Civet")<=-1||n.indexOf("iPhone")<=-1&&n.indexOf("iPad")<=-1){window.add_ios_methods=function(){};return}(CivetJsSDK_iPhone_Run=1,window[cv__bridge])||(window[cv__bridge]={},u=["showWebGif","view_picture","selectMedia","view_video","view_public_no_info","activity_intent","activity_intent2","show_calendar","show_location","navigation","find_location","scan_qrcode","open_file","hideOptionMenu","showOptionMenu","closeWindow","hideMenuItems","showMenuItems","setScreenDirection","callPhoneNum","chat","getCurrentUser","getFriendsInfo","getUserInfo","secretPage","watermark","scan_pcode","cleanCache","hideNav","showNav","copyToClipboard","wechatPay","aliPay","shareNews","actionURI","open_web","open_webview","open_webview2","get_location","getDeviceId","authorizationStatus","readNFC","writeNFC","getWalkCounts"],t="|",window.add_ios_methods=function(ios_ext_methods){var ii,method;if(typeof ios_ext_methods=="string"&&(ios_ext_methods=[ios_ext_methods]),typeof ios_ext_methods=="object")for(ii=0;ii<ios_ext_methods.length;ii++)(method=ios_ext_methods[ii],t.indexOf("|"+method+"|")==-1)&&(t+=method+"|",r="(window[cv__bridge])[method] = function "+method+"() { useIframeCount = (useIframeCount + 1) % iOsMsgIframes.length; iOsMsgIframes[useIframeCount].src = CUSTOM_PROTOCOL_SCHEME + ':' + arguments.callee.name + ':' + encodeURIComponent(JSON.stringify(arguments));}",eval(r))},window.add_ios_methods(u),o(document),window.setIosJsThreadNum=function(){var u=iOsMsgIframes.length,r,t,i;if(nn>u)for(r=document,iOsMsgIframes.length=nn,t=u;t<nn;t++)i=r.createElement("iframe"),i.style.display="none",r.documentElement.appendChild(i),iOsMsgIframes[t]=i},document.onreadystatechange=e,window.civet_init_phone_for_iPad_byEquipment=function(){var n=navigator.userAgent;(CivetJsSDK_iPhone_Run==0||n.indexOf("iPad")==-1)&&f()})}})(),function(n){var f;n.forbidden_previewImage=null;var u=function(n){return typeof n=="undefined"||n==undefined||n==null?!0:!1},i=function(n){return u(n)||n==""},t=function(n){return typeof n=="function"},r=function(n,i,r){return t(n)?(u(r)?n():n(r),!1):t(i)?(u(r)?i():i(r),!1):(alert("请使用最新版"+cm.appName+"客户端执行此操作！"),!1)};n.cmJs=n.civetmobile,n.cmPublic={isNullX:u,isNull:i,isfun:t,no_support_alert:r},i(cmJs)?(cmJs={is_civet_environment:!1},n.civetmobile=cmJs):(cmJs.is_civet_environment=!0,i(cmJs.civet_js_alert)||(n.alert=cmJs.civet_js_alert),i(cmJs.civet_js_confirm)||(n.confirm=cmJs.civet_js_confirm),i(cmJs.civet_js_prompt)||(n.prompt=cmJs.civet_js_prompt)),n.civet_js_notify={},f=navigator.userAgent.match(/iCivet\s+[\s\S]*(Android|iOS)\s+ver\s*([0-9\.]+(?:\.[A-Za-z][\s\S]+|))\s*JS\s*ver\s*([0-9\.]+)/),n.cm={appName:"相信",protocol:document.location.protocol,useCivet:/civet/i.test(navigator.userAgent)&&/(Android|iOS)/i.test(navigator.userAgent),CivetVersion:f!=null?f[2]:null,CivetDevice:f!=null?f[1]:null,CivetJsVersion:f!=null?f[3]:null,runTimes:{hideOptionMenu:0,"显示右上角菜单":0},chooseImage:function(n){if(!t(cmJs.selectMedia))return r(n.deal);if(i(n.type)||"|image|record|camera|image&camera|".indexOf(n.type)==-1&&(n.type=null),i(n.maxCount)||(isNaN(n.maxCount)&&(n.maxCount=null),n.maxCount=parseInt(n.maxCount,10),(n.maxCount<=0||n.maxCount>30)&&(n.maxCount=null)),i(n.type)&&i(n.maxCount))cmJs.selectMedia();else try{cmJs.selectMedia(n.type,n.maxCount)}catch(u){cmJs.selectMedia()}civet_js_notify.chooseImage=t(n.success)==!0?n.success:null},previewImage:function(r){var s,o,e;if(n.forbidden_previewImage!==!0){if(!i(r.index)&&!isNaN(r.index)&&!i(r.urls)&&i(r.current))try{r.current=r.urls[r.index]}catch(c){r.current=null}if(i(r.urls)||i(r.current)){t(r.fail)==!0&&r.fail("urls、current参数不能为空！");return}var u=r.current,f=r.urls,h=r.dealGif;if(h==!0&&u.substring(u.lastIndexOf(".")+1,u.length).toLowerCase()=="gif"){if(!t(cmJs.showWebGif)){if(t(r.deal)){r.deal(u);return}if(t(window.previewImageFun)){window.previewImageFun(u);return}return}cmJs.showWebGif(u);return}if(!t(cmJs.view_picture)){if(t(r.deal)){r.deal(u);return}if(t(window.previewImageFun)){window.previewImageFun(u);return}window.open(u);return}for(s=-1,o="",typeof f=="string"&&(f=f.indexOf("|")==-1?[f]:f.split("|")),e=0;e<f.length;e++)e!=0&&(o+="|"),o+=f[e],f[e]==u&&(s=e);s==-1&&(s=f.length,o+=(o==""?"":"|")+u),cmJs.view_picture(o,s)}},previewVideo:function(n){if(i(n.url)){t(n.fail)==!0&&n.fail("url参数不能为空！");return}if(!t(cmJs.view_video)){if(t(n.deal)){n.deal(n.url);return}if(t(window.previewVideoFun)){window.previewVideoFun(n.url);return}window.open(n.url);return}cmJs.view_video(n.url),civet_js_notify.previewVideo=t(n.close)==!0?n.close:null},previewMedia:function(request){function $$view_media(n){var u,i,r;if(baseMedia.uploaded_count=n.find("img[o-type='img'], img[o-type='gif'], img[o-type='video']").length,baseMedia.uploaded_count>=baseMedia.max_upload_count?baseMedia.area.find(".civet_upload_button, iframe#__cvtu__").hide():baseMedia.area.find(".civet_upload_button, iframe#__cvtu__").show(),n.find(".ImgPath").each(function(){var t=this;t.value="",n.find("img[o-type='img'], img[o-type='gif']").each(function(){t.value+=","+$(this).attr("o-src")})}),n.find(".VideoPath").each(function(){var t=this;t.value="",n.find("img[o-type='video']").each(function(){t.value+=","+$(this).attr("o-src")})}),u=n.find("img[o-type='img'], img[o-type='gif']"),i="",u.each(function(){var t=$(this).attr("o-src");t&&t!=""||(t=$(this).attr("src")),i+="|"+t}),i!=""&&(i=i.substr(1)),r=i.split("|"),t(cmJs.view_picture)!=!0||t(cmJs.showWebGif)!=!0||t(cmJs.view_video)!=!0||request.deal_force===!0){t(request.deal)!=!0&&(request.deal=function(n,t,i){window.open(t[i])}),u.each(function(n){$(this).off("click").on("click",function(){request.deal($(this).attr("o-type"),r,n)})});n.find("img[o-type='video']").off("click").on("click",function(){var n=$(this).attr("o-src");request.deal("video",[n],0)});return}u.each(function(n){$(this).off("click").on("click",function(){$(this).attr("o-type")=="img"?cm.previewImage({urls:r,current:r[n]}):cm.previewImage({urls:r,current:r[n],dealGif:!0})})});n.find("img[o-type='video']").off("click").on("click",function(){var n=$(this).attr("o-src");cm.previewVideo({url:n})})}var baseMedia=this,area,_ww,html;if(t(request.fail)!=!0&&(request.fail=function(n){alert(n)}),i(request)||i(request.area)){request.fail("请转入一个对像，area属性不能为空！");return}if(area=$(request.area),area.length==0){request.fail("找不到显示区域！");return}if(baseMedia.uuid="T"+ +new Date,eval("cm.Medias."+baseMedia.uuid+"= this"),baseMedia.area=area,baseMedia.video_icon=cm.protocol+"//civetinterface.foxconn.com/Content/images/video.jpg",baseMedia.initWin=function(){},baseMedia.ImgPathName=i(request.ImgPathName)?"ImgPath":request.ImgPathName,baseMedia.VideoPathName=i(request.VideoPathName)?"VideoPath":request.VideoPathName,i(request.init_upload_win_ext)!=!0&&(baseMedia.init_upload_win_ext=request.init_upload_win_ext),baseMedia.uploaded_count=0,baseMedia.max_upload_count=i(request.max_upload_count)?100:isNaN(request.max_upload_count)?100:request.max_upload_count,baseMedia.upload_type=i(request.upload_type)?"all":request.upload_type,_ww=parseInt(request.display_image_width)>30?parseInt(request.display_image_width):60,baseMedia.display_image_width=_ww,baseMedia.file_input_attribute="",i(request.file_input_attribute)!=!0&&(baseMedia.file_input_attribute=request.file_input_attribute),baseMedia.timeout=6e4,baseMedia.onUploaded=request.onUploaded,!i(request.upload_mode)&&request.upload_mode==1){var wrapHtml1='<span style="position: relative; display:inline-block; margin: 5px;">',buttonHtml='<div class="del-img" style="width:25px;height:25px;position:absolute;right:-5px;top:-5px;z-index:98;text-align:right;"><img src="//civetinterface.foxconn.com/Content/images/delete.png" style="width:20px;height:20px;"></div>',wrapHtml2="</span>";area.find("img[o-type='img'], img[o-type='gif'], img[o-type='video']").wrap(wrapHtml1+wrapHtml2).after(buttonHtml);area.find(".del-img").on("click",function(){confirm("是否要删除这个图片/视频！")&&($(this).parent().remove(),$$view_media(area))});if((u(request.upload_button_html)||typeof request.upload_button_html=="object")&&(request.upload_button_html='<img src="'+cm.protocol+'//civetinterface.foxconn.com/Content/images/add_media.png" style="width: '+_ww+"px; height: "+_ww+'px;">'),request.upload_button_html!=""){if(t(cmJs.selectMedia)&&request.never_use_civet_js!=1){html='<span class="civet_upload_button">'+request.upload_button_html+"</span>",area.append(html);area.find(".civet_upload_button").on("click",function(){cm.chooseImage({type:baseMedia.upload_type,maxCount:baseMedia.uploaded_count<baseMedia.max_upload_count?baseMedia.max_upload_count-baseMedia.uploaded_count:1,success:function(n){for(var r=n.localIds,i,t=0;t<r.length;t++)i="",n.isVedio=="true"?i="video":(i="img",/\.gif$/i.test(r[t])&&(i="gif")),baseMedia.addMedia(r[t],i)}})})}else i(request.upload_url)?alert('請設定請求對像的upload_url參數，值為你的網站接收上傳的URL來接收files["civet_uploads"]參數。上傳成功之後調用js對像的.add(\'<img src="[縮略圖]" o-src="[原圖]" o-type="img" />\')方法'):(baseMedia.initWin=function(){var f=this.area,i=$(f.find("iframe")[0].contentWindow.document),u,r,n;i.length!=0&&(u=i.find("form"),u.length==0&&(r='<head><style type="text/css">*{margin:0;padding:0}body{margin:0;padding:0}#uploadFile{position:absolute;filter:Alpha(opacity=0);opacity:0;height:'+_ww+"px;width:"+_ww+"px;z-index:100};</style></head>",n='<form id="frm01_" action="'+request.upload_url+'" enctype="multipart/form-data" method="post" style="position:absolute;top:0;left:0">',n+='<input id="uploadFile" name="civet_uploads" type="file" hidefocus="hidefocus" '+baseMedia.file_input_attribute+" onchange=\"javascript:document.getElementById('uploadFileName').value=parent.cm.UploadFileName(document.getElementById('uploadFile'), '"+baseMedia.uuid+"');document.getElementById('frm01_').submit();\" />",n+='<input id="uploadFileName" name="civet_upload_names" type="hidden" />',n+="</form>",i[0].write(r+n+request.upload_button_html)),t(baseMedia.init_upload_win_ext)==!0&&baseMedia.init_upload_win_ext())},baseMedia.init=function(){area.find("#__cvtu__").remove(),area.append('<iframe src="about:blank" frameborder="0" scrolling="no" id="__cvtu__" style="width: '+_ww+"px; height: "+_ww+'px;margin:0 5px;"></iframe>'),setTimeout(function(){baseMedia.initWin()},500)},baseMedia.init(),baseMedia.error=function(n){alert(n),setTimeout(function(){baseMedia.initWin()},500)});area.append('<input type="hidden" class="ImgPath" name="'+baseMedia.ImgPathName+'" >'),area.append('<input type="hidden" class="VideoPath" name="'+baseMedia.VideoPathName+'" >')}baseMedia.addMedia=function(n,t,r){if(!i(n)){_ww=baseMedia.display_image_width;var u=i(r)?t=="video"?baseMedia.video_icon:cm.crop(n,_ww*2,_ww*2):r;t!="gif"&&t!="video"&&(t="img"),baseMedia.add('<img src="'+u+'" o-src="'+n+'" o-type="'+t+'" style="width: '+_ww+"px; height: "+_ww+'px;" />')}},baseMedia.add=function(n){var r,e,u,f;if(!i(n)){if(typeof n=="object")try{baseMedia.addMedia(n.url,n.type,n.icon);return}catch(o){}baseMedia.uploading=!1,this.area.find(".civet_upload_button, iframe#__cvtu__").before(wrapHtml1+n+buttonHtml+wrapHtml2),r=this.area.find(".del-img:last").parent().find("img[o-type='img'], img[o-type='gif'], img[o-type='video']"),r.length!=0&&r.attr("o-type")!="video"&&r.attr("o-src")!=""&&r.attr("o-src")!=r.attr("src")&&(e=r.attr("src"),u=new Image,u.onerror=function(){if(this.src.indexOf("civet_load_try=1")==-1){this.src+=(u.src.indexOf("?")==-1?"?":"&")+"civet_load_try=1";var n=this.src;this.onload=function(){r.attr("src",n)};return}r.attr("src",r.attr("o-src"))},u.src=e,$("#uploadFile").val(),$("#uploadFileName").val());this.area.find(".del-img:last").off("click").on("click",function(){if(confirm("是否要删除这个图片/视频！")&&($(this).parent().remove(),$$view_media(area),t(baseMedia.onUploaded)))try{baseMedia.onUploaded(area.find(".ImgPath").val(),area.find(".VideoPath").val())}catch(n){}});if($$view_media(area),t(baseMedia.onUploaded))try{baseMedia.onUploaded(area.find(".ImgPath").val(),area.find(".VideoPath").val())}catch(o){}this.area.find("iframe#__cvtu__").attr("src","about:blank"),f=this,setTimeout(function(){f.initWin()},500)}},baseMedia.val=function(){var n=[];return baseMedia.area.find("img[o-type='img'], img[o-type='gif'], img[o-type='video']").each(function(){n.push({url:$(this).attr("o-src"),type:$(this).attr("o-type")})}),n}}$$view_media(area)},Medias:{},showPublicNoInfo:function(n){if(i(n.civetno)){t(n.fail)==!0&&n.fail("civetno参数不能为空！");return}if(n.civetType||(n.civetType=1),!t(cmJs.view_public_no_info))return r(n.deal);cmJs.view_public_no_info(n.civetno,n.civetType)},conference:function(n){if(!t(cmJs.activity_intent))return r(n.deal);i(n.confName)&&(n.confName="我的会议室"),i(n.confImg)&&(n.confImg=" http://icivetmedia.foxconn.com/group1/M00/00/B3/CoaWY1S6OHqEC6pLAAAAAO7rqVU017-300-150-crop.jpg"),i(n.confRemark)&&(n.confRemark="会议室讨论的主题：怎样解决交通拥挤问题"),i(n.confUrl)&&(n.confUrl="http://icivet.foxconn.com/");var l=new Date,e=n.creator,c=l.CivetFormat("yyyy-MM-dd hh:mm:ss"),s=n.confName,v=n.confImg,a=n.confRemark,h=n.confUrl,o=n.confId,f=n.peoples,u="<content><TYPE>theme</TYPE><LEVEL>0</LEVEL><TITLE>";u+="<![CDATA["+a+"]\]></TITLE>",u+="<IMGURL>"+v+"</IMGURL>",u+="<OWNER><![CDATA["+e+"]\]></OWNER>",u+="<DATE>"+c+"</DATE>",u+="<LINK><![CDATA["+h+"]\]></LINK>",i(n.notifyUrl)||(u+="<NOTIFY><![CDATA["+n.notifyUrl+"]\]></NOTIFY>"),u+="<MaxPersonNum>50</MaxPersonNum>",u+="</content>";try{i(f)?cmJs.activity_intent(s,u,o,e):(f=f.replace(/(，|；|;)/g,","),t(cmJs.activity_intent2)?cmJs.activity_intent2(s,u,o,e,f):cmJs.activity_intent(s,u,o,e,f))}catch(y){t(n.fail)==!0&&n.fail("创建会议室失败")}},calender:function(n){if(!t(cmJs.show_calendar))return r(n.deal,null,n.defaultDate);if(i(n.defaultDate)){var u=new Date;n.defaultDate=u.CivetFormat("yyyy-MM-dd")}cmJs.show_calendar(n.defaultDate),civet_js_notify.calender=t(n.success)==!0?n.success:null},showLocation:function(n){var i,u;if(!t(cmJs.show_location))return r(n.deal,null,n);var h=n.length,o="",e="",s="",f="";for(i=0;i<h;i++)u=i==0?"":",",o+=u+n[i].imgUrl,e+=u+n[i].name,s+=u+n[i].x,f+=u+n[i].y;cmJs.show_location(o,e,s,f)},navigation:function(n){var i,u;if(!t(cmJs.navigation))return r(n.deal,null,n);var h=n.length,o="",e="",s="",f="";for(i=0;i<h;i++)u=i==0?"":",",o+=u+n[i].imgUrl,e+=u+n[i].name,s+=u+n[i].x,f+=u+n[i].y;cmJs.navigation(o,e,s,f)},getLocation:function(n){if(!t(cmJs.find_location))return r(n.deal);cmJs.find_location(),civet_js_notify.getLocation=t(n.success)==!0?n.success:null},scanQRCode:function(n){if(!t(cmJs.scan_qrcode))return r(n.deal);cmJs.scan_qrcode(),civet_js_notify.scanQRCode=t(n.success)==!0?n.success:null},scanPCode:function(n){if(!t(cmJs.scan_pcode))return r(n.deal);cmJs.scan_pcode(),civet_js_notify.scanPCode=t(n.success)==!0?n.success:null},openFile:function(n){if(!t(cmJs.open_file))return r(n.deal,null,n.url);cmJs.open_file(n.type,n.url)},hideOptionMenu:function(){t(cmJs.hideOptionMenu)&&(cmJs.hideOptionMenu(),cm.runTimes.hideOptionMenu++)},showOptionMenu:function(){t(cmJs.showOptionMenu)&&(cmJs.showOptionMenu(),cm.runTimes.showOptionMenu++)},hideMenuItems:function(n){var u,r,i;if(!t(cmJs.hideMenuItems)){if(t(n.deal)){n.deal();return}return}for(u=n.menuList.length,r="",i=0;i<u;i++)i!=0&&(r+=","),r+=n.menuList[i];cmJs.hideMenuItems(r)},showMenuItems:function(n){var u,r,i;if(!t(cmJs.showMenuItems)){if(t(n.deal)){n.deal();return}return}for(u=n.menuList.length,r="",i=0;i<u;i++)i!=0&&(r+=","),r+=n.menuList[i];cmJs.showMenuItems(r)},setScreen:function(n){if(!t(cmJs.setScreenDirection)){if(t(n.deal)){n.deal();return}return}var i=n.direction;cmJs.setScreenDirection(i)},closeWindow:function(){if(!t(cmJs.closeWindow)){window.top.close();return}cmJs.closeWindow()},phoneNoInit:function(){civet_init_phone_for_iPad_byEquipment()},chat:function(n){if(!t(cmJs.chat))return r(n.deal);if(i(n.civetno)){t(n.fail)==!0&&n.fail("civetno参数不能为空！");return}cmJs.chat('{"emp_no": "'+n.civetno+'"}')},getCurrentUser:function(n){if(!t(cmJs.getCurrentUser))return r(n.deal);cmJs.getCurrentUser(),civet_js_notify.getCurrentUser=t(n.success)==!0?n.success:null},getFriendsInfo:function(n){if(!t(cmJs.getFriendsInfo))return r(n.deal);cmJs.getFriendsInfo(),civet_js_notify.getFriendsInfo=t(n.success)==!0?n.success:null},getUserInfo:function(request){if(!t(cmJs.getUserInfo))return r(request.deal);cmJs.getUserInfo('{"emp_no":"'+request.emp_no+'"}');var code;code=t(request.success)==!0?"civet_js_notify.getUserInfo_"+request.emp_no.toLowerCase()+" = request.success;":"civet_js_notify.getUserInfo_"+request.emp_no.toLowerCase()+" = null;",eval(code)},getGPS:function(i){if(!t(cmJs.get_location))return r(i.deal);u(i.modal)||i.modal!==!1&&i.modal!==0?cmJs.get_location():cmJs.get_location("nonmodal"),t(i.success)==!0?(n.gps_cuccess_handers==null?n.gps_cuccess_handers=[i.success]:n.gps_cuccess_handers.push(i.success),civet_js_notify.get_location=function(t){var s=0,o=0,f=0,h="",u,r,c,e;try{h=t.value.result}catch(l){i.success({lat:s,lng:o,code:f})}if(u=/Latitude\=([0-9\.\-]+)\,\s*Longitude\=([0-9\.\-]+)/i,r=h.match(u),r!=null?(s=r[1],o=r[2],f=1):(u=/Longitude\=([0-9\.\-]+)\,\s*Latitude\=([0-9\.\-]+)/i,r=h.match(u),r!=null&&(s=r[2],o=r[1],f=1)),n.gps_cuccess_handers!=null)for(c=n.gps_cuccess_handers.length,e=0;e<c;e++)n.gps_cuccess_handers[e]({lat:s,lng:o,code:f})}):civet_js_notify.get_location=null},getDeviceId:function(){if(!t(cmJs.getDeviceId))return r(request.deal);cmJs.getDeviceId(),t(request.success)==!0&&(civet_js_notify.getDeviceId=function(n){try{result=n.value.result,request.success(result)}catch(t){request.success("")}})},appPower:function(n){if(!t(cmJs.authorizationStatus))return r(n.deal);cmJs.authorizationStatus(n.type),t(n.success)==!0&&(civet_js_notify.authorizationStatus=function(t){try{result=t.value.result,n.success(result)}catch(i){n.success("")}})},shareNews:function(n){if(!t(cmJs.shareNews))return r(n.deal);if(i(n.title)||i(n.url)||i(n.icon)){t(n.fail)==!0&&n.fail("title、url参数不能为空！");return}i(n.desc)&&(n.desc=n.title),i(n.type)&&(n.type="chat"),n.type!="chat"&&(n.type="friendCircle"),i(n.publishTime)&&(n.publishTime=(new Date).CivetFormat("yyyy-MM-dd hh:mm:ss")),cmJs.shareNews('{"type":"'+n.type+'","title":"'+n.title+'","document":"'+n.desc+'","imgUrl":"'+n.icon+'","company":"'+n.company+'", "publishTime":"'+n.publishTime+'","newsUrl":"'+n.url+'"}')},full_url:function(n){var t=n.replace(/\\/g,"/").replace(/(^\s+|\s+$)/,""),i,r;return t.indexOf("//")==-1?(i=cm.protocol+"//"+window.location.host,t.substr(0,1)=="/"?i+t:(r=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1),i+r+t)):n},open_browser:function(n){if(i(n)&&(n=window.self.location.href),!t(cmJs.open_web)){window.open(n);return}cmJs.open_web(this.full_url(n))},open_webview:function(n){if(!t(cmJs.open_webview)){window.open(n);return}cmJs.open_webview(this.full_url(n))},open_webview2:function(n){if(!t(cmJs.open_webview2)){window.open(n);return}cmJs.open_webview2(this.full_url(n))},hideNav:function(){try{cmJs.hideNav()}catch(n){}},showNav:function(){try{cmJs.showNav()}catch(n){}},cleanCache:function(){t(cmJs.cleanCache)&&cmJs.cleanCache()},actionURI:function(n){t(cmJs.actionURI)&&cmJs.actionURI(n)},crop:function(n,t,i){if(/icivetmedia.foxconn.com/i.test(n)&&!/\-[0-9]+/.test(n)){var r=n.lastIndexOf(".");r!=-1&&((!t||isNaN(t))&&(t=100),(!i||isNaN(i))&&(i=t),n=n.substring(0,r)+"-"+t+"-"+i+"-crop"+n.substring(r))}return n},secretPageStatus:"0",secretPage:function(n){n=n==!0||n==1||n=="1",cm.secretPageStatus=n?"1":"0",n&&document.getElementById("page-to-srceen")!=null&&document.getElementById("page-to-srceen").remove(),cm.existsSecretPage()==!0?cmJs.secretPage(n):n?(cm.hideOptionMenu(),cm.runTimes.hideOptionMenu--):cm.runTimes.hideOptionMenu==0&&cm.showOptionMenu()},existsSecretPage:function(){if(!t(cmJs.secretPage))return!1;if(CivetJsSDK_iPhone_Run==1){if(i(cm.CivetVersion))return!1;var n=(cm.CivetVersion+".0.0").split("."),r=parseInt(n[0],10)*1e6+parseInt(n[1],10)*1e4;return(isNaN(n[2])||(r+=parseInt(n[2],10)),r>=3010509)?!0:!1}return!0},readNFC:function(n){if(!t(cmJs.readNFC))return r(n.deal);cmJs.readNFC(),civet_js_notify.readNFC=t(n.success)==!0?n.success:null},writeNFC:function(n){if(u(n)||u(n.data)){alert("请按格式要求传入data参数。");return}if(!t(cmJs.writeNFC))return r(n.deal);cmJs.writeNFC(n.data),civet_js_notify.writeNFC=t(n.success)==!0?n.success:null},watermark:function(n,i){var r=n==1?"1":"0";r==="1"&&document.getElementById("page-to-srceen")!=null&&document.getElementById("page-to-srceen").remove(),t(cmJs.watermark)&&(cm.watermarkStatus=r,r==="0"?cmJs.watermark('{ "show": "0" }'):/^[MSL]$/i.test(i)?cmJs.watermark('{ "show": "1", "density": "'+i+'" }'):cmJs.watermark('{ "show": "1" }'))},watermarkStatus:null,nonCopy:function(){function n(n){var t;return window.event?t=n.keyCode:n.which&&(t=n.which),t==17?(alert("禁止复制内容！"),!1):void 0}document.oncontextmenu=function(){return!1},document.onselectstart=function(){return!1},document.onkeydown=function(){return n(arguments[0])}},openCopy:function(){document.oncontextmenu=function(){},document.onselectstart=function(){},document.onkeydown=function(){}},localStorage:function(){function n(n){var i,r,t;cm.watermarkStatus!=="1"&&cm.secretPageStatus!=="1"&&(i=cm.protocol+"//icivetmedia.foxconn.com/group1/M00/59/0B/CoaWY1q96XmAGpIEAAAP50T24Es481.png",r='<style type="text/css">#page-to-srceen,a#page-to-srceen:link,a#page-to-srceen:visited{position:fixed; top: 68px; right: 15px; width: 40px;height:31px;z-index:999;opacity: 0.2; filter: alpha(opacity=20);}a#page-to-srceen:hover{opacity: 0.8; filter: alpha(opacity=80);}</style>',html=r+'<a href="javascript:void(0)" onclick="'+n+'" id="page-to-srceen"><img src="'+i+'" style="width: 40px; height: 31px;"></a>',t=document.createElement("div"),t.innerHTML=html,document.body.appendChild(t),cm.freeMove(document.getElementById("page-to-srceen")))}this.getItem=function(){console.log("Obsolete Features ")},this.setItem=function(){console.log("Obsolete Features ")},this.clear=function(){console.log("Obsolete Features ")},this.screenButton=function(){cm.useCivet&&n("return cm.sso_screen();")},this.setScreenUrl=function(){console.log("Obsolete Features ")},this.CtrlUrl=""},screenShare:function(){console.log(cm.useCivet),(new cm.localStorage).screenButton()},iPhoneX:function(){return/iphone/gi.test(navigator.userAgent)&&screen.height>=812&&screen.width>=375},sso_screen:function(){return confirm("請在PC端打開網頁：\r\nhttps://sso.foxconn.com/s\r\n\r\n然后掃描頁面的二維碼")===!1?!1:(cm.scanQRCode({success:function(n){var t=n.resultStr,i=/^https:\/\/\S+\/Scan\/JsonP\/[0-9a-f]{32}$/;if(!i.test(t))return alert("你掃的二維碼不合要求！\r\n請掃描https://sso.foxconn.com/s頁面的二維碼"),!1;cm.jsonp({url:t,data:"redirectUrl="+encodeURI(window.location.href),success:function(n){console.log(n)},failure:function(){console.log(数据请求失败)}})}}),!0)}};var h=function(n,t){var r,u,i;if(n=n.replace("[","").replace("]",""),n.indexOf("(null)")!=-1){alert("上傳圖片失敗");return}for(r=n.split(","),u=[],i=0;i<r.length;i++)u[i]=r[i];civet_js_notify.chooseImage&&civet_js_notify.chooseImage({localIds:u,isVedio:t})},c=function(n){if(civet_js_notify.calender){var t=n.split("-");t.length==3&&(t[1].length==1&&(t[1]="0"+t[1]),t[2].length==1&&(t[2]="0"+t[2]),n=t[0]+"-"+t[1]+"-"+t[2]),civet_js_notify.calender({date:n})}},l=function(n,t,i,r){civet_js_notify.getLocation&&civet_js_notify.getLocation({latitude:r,longitude:i,address:t,name:n,speed:0,accuracy:1})},e=function(n){civet_js_notify.scanQRCode&&civet_js_notify.scanQRCode({resultStr:n})},o=function(n){civet_js_notify.scanPCode&&civet_js_notify.scanPCode({resultStr:n})},s=function(data){var json=null,p,i,playSec,StaySec,jsonData,code;try{typeof data=="string"?(p="json = "+data.replace(/\s+/ig," ").replace(/\"\s?\[{/ig,"[{").replace(/}\]\s?\"/ig,"}]"),eval(p)):json=data}catch(e){}if(json==null||typeof json.actionId=="undefined"){typeof __CivetJsErrAlert=="string"&&alert(JSON.stringify(data));return}if(json.actionId=="getCurrentUser"){if(civet_js_notify.getCurrentUser){try{json.value.emp_no=json.value.emp_no.toUpperCase()}catch(e){}civet_js_notify.getCurrentUser(json)}}else if(json.actionId=="getFriendsInfo"){if(civet_js_notify.getFriendsInfo){try{for(i=0;i<json.value.length;i++)json.value[i].emp_no=json.value[i].emp_no.toUpperCase()}catch(e){}civet_js_notify.getFriendsInfo(json)}}else if(json.actionId=="getUserInfo"){code="if (civet_js_notify.getUserInfo_{no}) { civet_js_notify.getUserInfo_{no}(json);}";try{code=code.replace(/\{no\}/g,json.value.emp_no.toUpperCase()),eval(code)}catch(e){}}else if(json.actionId=="view_video"){if(civet_js_notify.previewVideo)try{playSec=parseFloat(json.value.playSec,10),StaySec=parseFloat(json.value.StaySec,10),civet_js_notify.previewVideo(playSec,StaySec,json.value)}catch(e){}}else if(typeof json.actionId=="string"&&json.actionId!=""){jsonData=json,!u(json.value)&&u(json.value.value)&&(jsonData=json.value,jsonData.value=json.value,jsonData.actionId=json.actionId),code="if (civet_js_notify."+json.actionId+") { civet_js_notify."+json.actionId+"(jsonData);}";try{eval(code)}catch(e){alert(e)}json.actionId=="get_location"&&(n.gps_cuccess_handers=null)}};CivetJsSDK_iPhone_Run?(n.showMedia=function(n,t){setTimeout(function(){h(n,t)},200)},n.civetSelectedDate=function(n){setTimeout(function(){c(n)},200)},n.civetUploadLocation=function(n,t,i,r){setTimeout(function(){l(n,t,i,r)},200)},n.feedback=function(n){setTimeout(function(){s(n)},200)},n.show_qrcode=function(n){setTimeout(function(){e(n)},200)},n.show_pcode=function(n){setTimeout(function(){o(n)},200)}):(n.showMedia=h,n.civetSelectedDate=c,n.civetUploadLocation=l,n.feedback=s,n.show_qrcode=e,n.show_pcode=o),cm.CivetJsSDKVersion="2.0.22072009",n.ShowCivetJsSDKVer=function(){var n="V"+cm.CivetJsSDKVersion;try{console.log(n)}catch(t){alert(n)}return n}}(window),Date.prototype.CivetFormat=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n},Number.prototype.CivetFormat=function(n){return new Date(this).CivetFormat(n)},window.cm.page_loaded=!1,document.onreadystatechange=function(){document.readyState=="complete"&&(window.cm.page_loaded=!0)},window.onhashchange=function(){var n;if(window.cm.page_loaded===!0&&(n=/[\s\S]*to([0-9]+)\*([0-9]+)[^0-9]*/ig,n.test(window.location.hash))){var r=window.location.hash.replace(n,"$1*$2").split("*"),u=[document.body.clientWidth-window.innerWidth,document.body.clientHeight-window.innerHeight],t=u[0]/99*r[0],i=u[1]/99*r[1];scrollTo(t>0?t:0,i>0?i:0)}},cm.freeMove=function(n){function f(){r=!0;var t;t=event.touches?event.touches[0]:event,u.x=t.clientX,u.y=t.clientY,s=n.offsetLeft,c=n.offsetTop}function o(){var f,e;r&&(f=event.touches?event.touches[0]:event,h=f.clientX-u.x,l=f.clientY-u.y,i=Math.max(0,s+h),t=Math.max(0,c+l),e=window.screen,i=Math.min(e.availWidth-40,i),t=Math.min(e.availHeight-31,t),n.style.right="",n.style.left=i+"px",n.style.top=t+"px",n.addEventListener("touchmove",function(){try{event.preventDefault()}catch(n){}},!1))}function e(){r=!1}var r=!1,u={x:0,y:0},h,l,s,c,i,t;n.addEventListener("mousedown",function(){f()},!1),n.addEventListener("touchstart",function(){f()},!1),n.addEventListener("mousemove",function(){r||f(),o()},!1),n.addEventListener("touchmove",function(){o()},!1),n.addEventListener("mouseup",function(){e()},!1),n.addEventListener("mouseout",function(){e()},!1),n.addEventListener("touchend",function(){e()},!1)},cm.UploadFileName=function(n,t){function i(n){var t="";return window.createObjectURL!=undefined?t=window.createObjectURL(n):window.URL!=undefined?t=window.URL.createObjectURL(n):window.webkitURL!=undefined&&(t=window.webkitURL.createObjectURL(n)),t}if(cm.Medias[t].uploading=!0,setTimeout(function(){cm.Medias[t].uploading===!0&&(typeof CivetHiddenLoading=="function"&&CivetHiddenLoading(),alert("上傳文件超時，請確定你的網絡是否正常?"),cm.Medias[t].init())},cm.Medias[t].timeout),!n.files)return n.value;var u=n.files[0],r=i(u);return typeof CivetShowLoading=="function"&&CivetShowLoading(),r},console||(console=[],console.log=function(){return}),window.add_ios_methods(["openAPP","closeApp"]),cm.openAPP=function(n){if(typeof n!="object"||cmPublic.isNullX(n.urlScheme)||typeof n.download!="object"||cmPublic.isNullX(n.download.ios)||cmPublic.isNullX(n.download.android)||cmPublic.isNullX(n.androidPackageName))return alert("参数异常");if(!cmPublic.isfun(cmJs.openAPP))return cmPublic.no_support_alert();var t=cmPublic.isNullX(n.download.androidMarket)?"":n.download.androidMarket;cmJs.openAPP(n.urlScheme,[n.download.ios,n.download.android,t],n.androidPackageName)},cm.closeApp=function(){if(!cmPublic.isfun(cmJs.closeApp))return cmPublic.no_support_alert();cmJs.closeApp()},cm.jsonp=function(n){var i="js_p_"+Math.random().toString().substr(2)+Math.random().toString().substr(2),r,t;window[i]=function(r){r!==null?n.success(r):n.failure(r),t.remove(),window[i]=null},r=n.data!==undefined?n.url+"?"+n.data+"&callback="+i:n.url+"?callback="+i,t=document.createElement("script"),t.src=r,document.body.appendChild(t)},function(){function n(t,r){function h(n,t){return function(){return n.apply(t,arguments)}}var o,f,e,u,s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!n.notNeeded(t)){for(f=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],e=this,u=0,s=f.length;u<s;u++)e[f[u]]=h(e[f[u]],e);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(n,i,r){var u=Node.prototype.removeEventListener;n==="click"?u.call(t,n,i.hijacked||i,r):u.call(t,n,i,r)},t.addEventListener=function(n,i,r){var u=Node.prototype.addEventListener;n==="click"?u.call(t,n,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(t,n,i,r)}),typeof t.onclick=="function"&&(o=t.onclick,t.addEventListener("click",function(n){o(n)},!1),t.onclick=null)}}var u=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!u,t=/iP(ad|hone|od)/.test(navigator.userAgent)&&!u,r=t&&/OS 4_\d(_\d)?/.test(navigator.userAgent),e=t&&/OS [6-7]_\d/.test(navigator.userAgent),f=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(t&&n.type==="file"||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)},n.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}},n.prototype.sendClick=function(n,t){var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur(),i=t.changedTouches[0],r=document.createEvent("MouseEvents"),r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,n.dispatchEvent(r)},n.prototype.determineEventType=function(n){return i&&n.tagName.toLowerCase()==="select"?"mousedown":"click"},n.prototype.focus=function(n){var i;t&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"&&n.type!=="month"?(i=n.value.length,n.setSelectionRange(i,i)):n.focus()},n.prototype.updateScrollParent=function(n){var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t,n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n},n.prototype.onTouchStart=function(n){var f,i,u;if(n.targetTouches.length>1)return!0;if(f=this.getTargetElementFromEventTarget(n.target),i=n.targetTouches[0],t){if(u=window.getSelection(),u.rangeCount&&!u.isCollapsed)return!0;if(!r){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(f)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=f,this.touchStartX=i.pageX,this.touchStartY=i.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0},n.prototype.touchHasMoved=function(n){var i=n.changedTouches[0],t=this.touchBoundary;return Math.abs(i.pageX-this.touchStartX)>t||Math.abs(i.pageY-this.touchStartY)>t?!0:!1},n.prototype.onTouchMove=function(n){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},n.prototype.findControl=function(n){return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(n){var h,c,f,o,s,u=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,e&&(s=n.changedTouches[0],u=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),f=u.tagName.toLowerCase(),f==="label"){if(h=this.findControl(u),h){if(this.focus(u),i)return!1;u=h}}else if(this.needsFocus(u))return n.timeStamp-c>100||t&&window.top!==window&&f==="input"?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,n),t&&f==="select"||(this.targetElement=null,n.preventDefault()),!1);return t&&!r&&(o=u.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(u)||(n.preventDefault(),this.sendClick(u,n)),!1)},n.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(n){return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0},n.prototype.onClick=function(n){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)},n.prototype.destroy=function(){var n=this.layer;i&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0)),n.removeEventListener("click",this.onClick,!0),n.removeEventListener("touchstart",this.onTouchStart,!1),n.removeEventListener("touchmove",this.onTouchMove,!1),n.removeEventListener("touchend",this.onTouchEnd,!1),n.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(n){var t,u,r,e;if(typeof window.ontouchstart=="undefined")return!0;if(u=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],u)if(i){if(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||u>31&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return f&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.msTouchAction==="none"||n.style.touchAction==="manipulation"?!0:(e=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],e>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.touchAction==="none"||n.style.touchAction==="manipulation"?!0:!1},n.attach=function(t,i){return new n(t,i)},typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return n}):typeof module!="undefined"&&module.exports?(module.exports=n.attach,module.exports.FastClick=n):window.FastClick=n}()
